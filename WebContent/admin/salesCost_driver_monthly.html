<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Metro, a sleek, intuitive, and powerful framework for faster and easier web development for Windows Metro Style.">
    <meta name="keywords" content="HTML, CSS, JS, JavaScript, framework, metro, front-end, frontend, web development">
    <meta name="author" content="Sergey Pimenov and Metro UI CSS contributors">

    <link rel='shortcut icon' type='image/x-icon' href='../favicon.ico' />

    <title>株式会社ケー・アールライン</title>

    <link href="../css/metro.css" rel="stylesheet">
    <link href="../css/metro-icons.css" rel="stylesheet">
    <link href="../css/metro-responsive.css" rel="stylesheet">

    <script src="../js/jquery-2.1.3.min.js"></script>
    <script src="../js/jquery.dataTables.min.js"></script>

    <script src="../js/metro.js"></script>

    <style>
        html, body {
            height: 100%;
        }
        body {
        }
        .page-content {
            padding-top: 3.125rem;
            min-height: 100%;
            height: 100%;
        }
        .table .input-control.checkbox {
            line-height: 1;
            min-height: 0;
            height: auto;
        }

        @media screen and (max-width: 800px){
            #cell-sidebar {
                flex-basis: 52px;
            }
            #cell-content {
                flex-basis: calc(100% - 52px);
            }
        }
    </style>

    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
		    google.charts.load("current", {packages:['table', 'gauge', 'corechart']});
		    google.charts.setOnLoadCallback(draw_sort);

		function draw_sort() {
			// データ定義
			var data = new google.visualization.arrayToDataTable([
			    ['名前', '経費', '売上', 'フルタイム', '対象年月'],
			    ['平坂', 1000000, 2000000, true,         201512],
			    ['安藤', 800000,  1500000, false,        201512],
			    ['北村', 1350000, 1900000, true,         201512],
			    ['渡邊', 1550000, 2400000, true,         201512],
			    ['山下', 1750000, 4000000, true,         201512],
			    ['清水', 1250000, 3000000, true,         201512],
			    ['Ｇさん', 2250000, 6000000, true,         201512],
			    ['Ｈさん', 1250000, 3000000, true,         201512],
			    ['Ｉさん', 3250000, 5000000, true,         201512],
			    ['Ｊさん',   700000,  2000000, true,         201512],
			]);


			// テーブルの作成
			var formatter = new google.visualization.NumberFormat({pattern: '\#,###'});
			formatter.format(data, 1);
			formatter.format(data, 2);
			var formatter_year = new google.visualization.NumberFormat({pattern: '######'});
			formatter_year.format(data, 4);

			var table_option = {showRowNumber: true};
			var table = new google.visualization.Table(document.getElementById('table_sort_div'));
			table.draw(data, table_option);


			// DataView の作成
			var vdata = new google.visualization.DataView(data);
			vdata.setColumns([0, 1, 2]);


			// グラフの作成
			var chart_option = {hAxis:{format:'\#,###'}};
			var chart = new google.visualization.BarChart(document.getElementById('chart_sort_div'));
			chart.draw(vdata, chart_option);

			// テーブルで選択された時にグラフを選択する
			google.visualization.events.addListener(table, 'select', function() {
			    chart.setSelection(table.getSelection());
			});

			// グラフで選択された時にテーブルを選択する
			 google.visualization.events.addListener(chart, 'select', function() {
			     var selection = chart.getSelection();
			     for (var i = 0; i < selection.length; i++) {
			        // 列情報を除去
			        selection[i].column = null;
			     }    
			     table.setSelection(selection);
			 });
			 
			 // テーブルの sort イベントでグラフをソートする関数を呼び出す。
			 google.visualization.events.addListener( table, 'sort', function(event) {
			     // イベントが発生した列でデータをソート(DataView ではない)
			     data.sort([{column: event.column, desc: !event.ascending}]);
			 
			     // グラフの再描画
			     chart.draw(vdata, chart_option);
			 
			     // テーブルの再描画
			     table_option['sortAscending'] = event.ascending; // ソート昇降順
			     table_option['sortColumn'] = event.column; // ソート列
			     table.draw(data, table_option);
			 
			     // テーブルの選択状態をクリア
			     table.setSelection(null);
			 });
		}
    </script>
    <script>
        function pushMessage(t){
            var mes = 'Info|Implement independently';
            $.Notify({
                caption: mes.split("|")[0],
                content: mes.split("|")[1],
                type: t
            });
        }

        $(function(){
            $('.sidebar').on('click', 'li', function(){
                if (!$(this).hasClass('active')) {
                    $('.sidebar li').removeClass('active');
                    $(this).addClass('active');
                }
            })
        })
    </script>
    
    <!-- ヘッダー固定 -->
	<script type="text/javascript">
        $(document).ready(function() {
           $('#header-target').load('header.html');
        });
    </script>
    
</head>
<body class="bg-steel">
    
    <!-- ヘッダー固定 -->
    <div id="header-target"></div>
    

    <div class="page-content">
        <div class="flex-grid no-responsive-future" style="height: 100%;">

            <div class="row" style="height: 100%">
                <div class="cell auto-size padding20 bg-white" id="cell-content">
                    <ul class="breadcrumbs" style="padding:0px;">
					    <li><h4><a href="#">車両・委託先別売上経費一覧</a></h4></li>
					</ul>
                    <hr class="thin bg-grayLighter">
		            <div class="grid">
		                <div class="row cells12">
							<div class="cell colspan3">
		                        年度
								<div class="input-control select" style="width:100px;">
		                            <select>
		                                <option>2016</option>
		                                <option>2015</option>
		                                <option>2014</option>
		                                <option>2013</option>
		                            </select>
								</div>
		                    </div>
							<div class="cell colspan3">
		                        月
								<div class="input-control select" style="width:80px;">
		                            <select>
		                                <option>01</option>
		                                <option>02</option>
		                                <option>03</option>
		                                <option>04</option>
		                                <option>05</option>
		                                <option>06</option>
		                                <option>07</option>
		                                <option>08</option>
		                                <option>09</option>
		                                <option>10</option>
		                                <option>11</option>
		                                <option>12</option>
		                            </select>
								</div>
		                    </div>
							<div class="cell colspan4">
								<div class="align-right">
			                    	<button class="button primary"><span class="mif-search">検索</span></button>
			                    </div>
		                    </div>
	                    </div>
					</div>
                    <hr class="thin bg-grayLighter">
			        <div class="cell">
					    <div id="table_sort_div" style="float:left;"></div>
					</div>
			        <div class="cell">
					    <div id="chart_sort_div" style="float:left;width:600px;height:350px;"></div>
					</div>
                </div>
            </div>
        </div>
    </div>
</body>
</html>